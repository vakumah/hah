name: macOS 14 Standard GUI
on: workflow_dispatch

jobs:
  gui-access:
    runs-on: macos-14 # Menggunakan versi standar macOS Sonoma
    steps:
      - name: Install Tools
        run: brew install bore-cli

      - name: Setup Remote Management
        run: |
          sudo /System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -activate -configure -access -on -privs -all -restart -agent
          sudo /System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -configure -clientopts -setvnclegacy -vnclegacy yes -setvncpw -vncpw Password123
          caffeinate -dim &

      - name: Start Tunnel
        run: |
          bore local 5900 --to bore.pub &
          sleep 10

      - name: Keep Alive
        run: |
          echo "Host: bore.pub"
          echo "Password: Password123"
          # Menjaga runner aktif hingga 6 jam
          sleep 21600
